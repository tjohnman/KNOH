<!DOCTYPE HTML>
<html>
 <head>
    <title>Primitives table / corner-by-corner</title>
    <meta name="Generator" content="EditPlus">
    <meta name="Author" content="meisl">
 </head>

 <body>
    <style type="text/css">
        table {
            margin:0px;
            border:0px solid red;
            padding:0px;
        }
        td {
            margin:0px;
            border:0px solid green;
            padding:0px;
            text-align:center; vertical-align:middle;
            font-family:monospace; font-size:11px; font-weight: bold;
            color:blue;
        }
        
        td * td {
            border:0px solid black;
            padding:0px;
        }

        .junction { color:green; }
        
        .TL { text-align:right; vertical-align:bottom;  padding-bottom:1px; border-bottom:1px solid black; padding-right: 1px; border-right: 1px solid black; }
        .BL { text-align:right; vertical-align:top;     padding-right: 1px; border-right: 1px solid black; padding-top:   1px; border-top:   1px solid black; }
        .BR { text-align:left; vertical-align:top;      padding-top:   1px; border-top:   1px solid black; padding-left:  1px; border-left:  1px solid black; }
        .TR { text-align:left; vertical-align:bottom;   padding-left:  1px; border-left:  1px solid black; padding-bottom:1px; border-bottom:1px solid black; }

        .quadrant-label * { font-size: 20px; font-weight: bold; color:black; }

        td * td img {
            display:block;
            border:0px solid black;
            padding:5px;
            padding-bottom:0px;
        }
        td.TL * td img { padding-right:8px; }
        td.TR * td img { padding-left: 8px; }
        td.BL * td img { padding-right:8px; padding-top:8px; }
        td.BR * td img { padding-left: 8px; padding-top:8px; }

        td * td[colspan="2"] img {
            margin-left:74px;
        }

        #play td {
            text-align: center;
            border:none;
        }

        #play #mode td {
            text-align: left;
            border-right:1px dotted black;
            padding-right:8px;
        }
    </style>

    <table>
    <tr>
        <td class="TL"><table>
            <tr>
                <td class="quadrant-label" rowspan="3"><div id="TL"></div></td>
                <td>
                    <img regexp="[mnp][3]" src="gfx/TL-0011.png?raw=true" title="connected to the right and bottom but NOT to top and left">
                    0011 [3]
                </td>
                <td class="junction" colspan="2">
                    <img regexp="(npn|pnp)(TB?|B)" src="gfx/TL-T-or-B-or-TB.png?raw=true" title="junction: base connected to the top or bottom or both (left and right implicit)">
                    <strike>0</strike>_<strike>0</strike>_ (TB?|B)
                </td>
            </tr>
            <tr>
                <td class="junction" rowspan="2">
                    <img regexp="(npn|pnp)(LR?|R)" src="gfx/TL-L-or-R-or-LR.png?raw=true" title="junction: base connected to the left or right or both (top and bottom implicit)">
                    _<strike>0</strike>_<strike>0</strike> (LR?|R)
                </td>
                <td>
                    <img regexp="[mnp][012]" src="gfx/TL-0000-or-0001-or-0010.png?raw=true" title="NOT connected to the left and NOT to the top and NOT to *both*, right and bottom">
                    00<strike>11</strike> [012]
                </td>
                <td>
                    <img regexp="[mnp][4567]" src="gfx/TL-01XX.png?raw=true" title="connected to the left but NOT to the top">
                    01XX [4567]
                </td>
            </tr>
            <tr>
                <td>
                    <img regexp="[mnp][89AB]" src="gfx/TL-10XX.png?raw=true" title="connected to the top but NOT to the left">
                    10XX [89AB]
                </td>
                <td>
                    <img regexp="[mnp][CDEF]" src="gfx/TL-11XX.png?raw=true" title="connected to the top and left">
                    11XX [CDEF]
                  </td>
            </tr>
        </table></td>

        <td class="TR"><table>
            <tr>
                <td class="junction" colspan="2">
                    <img regexp="(npn|pnp)(TB?|B)" src="gfx/TR-T-or-B-or-TB.png?raw=true" title="junction: base connected to the top or bottom or both (left and right implicit)">
                    <strike>0</strike>_<strike>0</strike>_ (TB?|B)
                </td>
                <td>
                    <img regexp="[mnp][6]" src="gfx/TR-0110.png?raw=true" title="connected to the left and bottom but NOT to top and right">
                    0110 [6]
                </td>
                <td class="quadrant-label" rowspan="3"><div id="TR"></div></td>
            </tr>
            <tr>
                <td>
                    <img regexp="[mnp][1357]" src="gfx/TR-0XX1.png?raw=true" title="connected to the right but NOT to the top">
                    0XX1 [1357]
                </td>
                <td>
                    <img regexp="[mnp][024]" src="gfx/TR-0000-or-0010-or-0100.png?raw=true" title="NOT connected to the top and NOT to the right and NOT to *both*, left and bottom">
                    0<strike>11</strike>0 [024]
                </td>
                <td class="junction">
                    <img regexp="(L)" src="gfx/TR-L.png?raw=true" title="junction: base connected to the left but NOT to the right (top and bottom implicit)">
                    _1_0 (L)
                </td>
            </tr>
            <tr>
                <td>
                    <img regexp="[mnp][9BDF]" src="gfx/TR-1XX1.png?raw=true" title="connected to the top and right">
                    1XX1 [9BDF]
                </td>
                <td>
                    <img regexp="[mnp][8ACE]" src="gfx/TR-1XX0.png?raw=true" title="connected to the top but NOT to the right">
                    1XX0 [8ACE]
                </td>
                <td class="junction">
                    <img regexp="(npn|pnp)(L?R)" src="gfx/TR-R-or-LR.png?raw=true" title="junction: base connected to the right and maybe to the left (top and bottom implicit)">
                    _X_1 (L?R)
                </td>
            </tr>
        </table></td>
    </tr>


    <tr>
        <td class="BL"><table>
            <tr>
                <td class="quadrant-label" rowspan="3"><div id="BL"></div></td>
                <td class="junction" rowspan="2">
                    <img regexp="(npn|pnp)(LR?|R)" src="gfx/BL-L-or-R-or-LR.png?raw=true" title="junction: base connected to the left or right or both (top and bottom implicit)">
                    _<strike>0</strike>_<strike>0</strike> (LR?|R)
                </td>
                <td>
                    <img regexp="[mnp][23AB]" src="gfx/BL-X01X.png?raw=true" title="connected to the bottom but NOT to the left">
                    X01X [23AB]
                </td>
                <td>
                    <img regexp="[mnp][67EF]" src="gfx/BL-X11X.png?raw=true" title="connected to the left and bottom">
                    X11X [67EF]
                </td>
            </tr>
            <tr>
                <td>
                    <img regexp="[mnp][018]" src="gfx/BL-0000-or-0001-or-1000.png?raw=true" title="NOT connected to the left and NOT to the bottom and NOT to *both*, right and top">
                    <strike>1</strike>00<strike>1</strike> [018]
                </td>
                <td>
                    <img regexp="[mnp][45CD]" src="gfx/BL-X10X.png?raw=true" title="connected to the left but NOT to the bottom">
                    X10X [45CD]
                </td>
            </tr>
            <tr>
                <td>
                    <img regexp="[mnp][9]" src="gfx/BL-1001.png?raw=true" title="connected to the top and to the right but NOT to left and bottom">
                    1001 [9]
                </td>
                <td class="junction">
                    <img regexp="(npn|pnp)(T)" src="gfx/BL-T.png?raw=true" title="junction: base connected to the top but NOT to the bottom (left and right implicit)">
                    1_0_ (T)
                </td>
                <td class="junction">
                    <img regexp="(npn|pnp)(T?B)" src="gfx/BL-B-or-TB.png?raw=true" title="junction: base connected to the bottom and maybe to the top (left and right implicit)">
                    X_1_ (T?B)
                </td>
            </tr>
        </table></td>


        <td class="BR"><table>
            <tr>
                <td>
                    <img regexp="[mnp][37BF]" src="gfx/BR-XX11.png?raw=true" title="connected to the bottom and right">
                    XX11 [37BF]
                </td>
                <td>
                    <img regexp="[mnp][26AE]" src="gfx/BR-XX10.png?raw=true" title="connected to the bottom but NOT to the right">
                    XX10 [26AE]
                </td>
                <td class="junction">
                    <img regexp="(npn|pnp)(L?R)" src="gfx/BR-R-or-LR.png?raw=true" title="junction: base connected to the right and maybe to the left (top and bottom implicit)">
                    _X_1 (L?R)
                </td>
                <td class="quadrant-label" rowspan="3"><div id="BR"></div></td>
            </tr>
            <tr>
                <td>
                    <img regexp="[mnp][159D]" src="gfx/BR-XX01.png?raw=true" title="connected to the right but NOT to the bottom">
                    XX01 [159D]
                </td>
                <td>
                    <img regexp="[mnp][048]" src="gfx/BR-0000-or-0100-or-1000.png?raw=true" title="NOT connected to the bottom and NOT to the right and NOT to *both*, top and left">
                    <strike>11</strike>00 [048]
                </td>
                <td class="junction">
                    <img regexp="(npn|pnp)(L)" src="gfx/BR-L.png?raw=true" title="junction: base connected to the left but NOT to the right (top and bottom implicit)">
                    _1_0 (L)
                </td>
            </tr>
            <tr>
                <td class="junction">
                    <img regexp="(npn|pnp)(T?B)" src="gfx/BR-B-or-TB.png?raw=true" title="junction: base connected to the bottom and maybe to the top (left and right implicit)">
                    X_1_ (T?B)
                </td>
                <td class="junction">
                    <img regexp="(npn|pnp)(T)" src="gfx/BR-T.png?raw=true" title="junction: base connected to the top but NOT to the bottom (left and right implicit)">
                    1_0_ (T)
                </td>
                <td>
                    <img regexp="[mnp][C]" src="gfx/BR-1100.png?raw=true" title="connected to the top and left but NOT to bottom and right">
                    1100 [C]
                </td>
            </tr>
        </table></td>

    </tr>
    </table>

    <table id="play" style="position:absolute;right:150px;top:430px;border:1px solid black;">
    <tr>
        <td>
            <table id="mode">
            <tr>
                <td>
                    <input type="radio" name="mode" value="S" checked>Non-junction
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" name="mode" value="Jv">Vert. junction
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" name="mode" value="Jh">Horiz. junction
                </td>
            </tr>
            </table>
        </td>
        <td>
            <table>
            <tr>
                <td></td>
                <td></td>
                <td>T</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td><input class="dir" S Jv type="checkbox" name="T" value="8"></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>L</td>
                <td><input class="dir" S Jh type="checkbox" name="L" value="4"></td>
                <td></td>
                <td><input class="dir" S Jh type="checkbox" name="R" value="1"></td>
                <td>R</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td><input class="dir" S Jv type="checkbox" name="B" value="2"></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td>B</td>
                <td></td>
                <td></td>
            </tr>
            </table>
        </td>
    </tr>
    </table>

    <script type="text/javascript">
    <!--
        
        function dirChecks() {  return document.querySelectorAll('#play input.dir'); }
        function modeRadios() { return document.querySelectorAll('#play input[name=mode]'); }
        function primitives() { return document.querySelectorAll('td img[regexp]'); }

        function bind(f) {
            var args = Array.prototype.slice.call(arguments, 1);
            return function () {
                return f.apply(this, args.concat(Array.prototype.slice.call(arguments, 0)));
            };
        }

        var connections = { T: 0, L: 0, B: 0, R: 0,
            mode: undefined, // S or Jv or Jh
            value: function () {
                var out;
                switch (this.mode) {
                    case 'S':
                        out = this.T + this.L + this.B + this.R;
                        out = 'm' + String.fromCharCode(out + ((out < 10) ? 48 : 55));
                        break;
                    case 'Jv':
                        out = 'npn' + (this.T ? 'T' : '') + (this.B ? 'B' : '')
                        break;
                    case 'Jh':
                        out = 'npn' + (this.L ? 'L' : '') + (this.R ? 'R' : '')
                        break;
                    default:
                        alert('unknown mode "' + this.mode + '"');
                        throw new TypeError('unknown mode "' + this.mode + '"');
                }
                return out;
            },
            match: function (primitive) {
                var regexp = new RegExp('^' + primitive.getAttribute('regexp') + '$');
                var code = this.value();
                return (code.length > 0) && regexp.test(code);
            },
        };

        function update() {
            var i, p, ps = primitives();
            for (i = 0; i < ps.length; i++) {
                p = ps[i];
                if (connections.match(p)) {
                    p.parentNode.style.border = '2px solid red';
                } else {
                    p.parentNode.style.border = '2px solid white';
                }
            }
        }

        function setEnabled(mode) {
            var i, c, cs = dirChecks();
            connections.mode = mode;
            for (i = 0; i < cs.length; i++) {
                c = cs[i];
                if (c.hasAttribute(mode)) {
                    c.removeAttribute('disabled');
                } else {
                    c.setAttribute('disabled', '');
                }
            }
            update();
        }

        function init() {
            var i, c, cs = dirChecks(), r, rs = modeRadios();
            for (i = 0; i < cs.length; i++) {
                c = cs[i];
                c.onclick = (function (c) {
                    var dir = c.getAttribute('name');
                    return function () {
                        connections[dir] = c.checked ? parseInt(c.value) : 0;
                        update();
                    };
                }(c));
            }

            for (i = 0; i < rs.length; i++) {
                r = rs[i];
                r.onclick = bind(setEnabled, r.value);
                if (r.checked) {
                    r.onclick();
                }
            }
        }

        init();
    //-->
    </script>

 </body>
</html>
